<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Control the weather!</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript" src="weather.js"></script>
  </head>

  <body>
    <div id="weather">
      <img class="sky-element" src="images/sun.png" id="sun" />
      <img
        class="sky-element"
        src="images/p-cloud-1.png"
        id="p-cloud-1"
      />
      <img
        class="sky-element"
        src="images/p-cloud-2.png"
        id="p-cloud-2"
      />
      <img
        class="sky-element"
        src="images/r-cloud-1.png"
        id="r-cloud-1"
      />
      <img
        class="sky-element"
        src="images/r-cloud-2.png"
        id="r-cloud-2"
      />
      <img
        class="sky-element"
        src="images/r-cloud-3.png"
        id="r-cloud-3"
      />
      <audio src="storm-sound.mp3" id="storm" loop></audio>
      <form>
        <!-- Exercise 4 -->
        <h4>Set barometric pressure</h4>
        <label for="barometer"><output id="num">30</output></label>
        <input
          type="range"
          id="barometer"
          step="0.50"
          value="30"
          min="26"
          max="31"
          list="barlist"
          oninput="num.value = this.value"
        />

        <datalist is="barlist">
          <option>26</option>
          <option>27</option>
          <option>28</option>
          <option>29</option>
          <option>30</option>
          <option>31</option>
        </datalist>
      </form>
    </div>
    <script>
      // Exercise 3
      const barometerInput = document.getElementById("barometer");

      function changeWeather(evt) {
        evt.preventDefault();

        // Exercise 4
        const pressure = barometerInput.value;
        console.log(pressure);

        // Exercise 6
        if (pressure >= 30) {
          sunny();
        } 
        // Exercise 7
        else if (pressure >= 29 && pressure < 30) {
          addClouds();
        } 
        // Exercise 8
        else if (pressure >= 28 && pressure < 29) {
          addRainClouds();
        } 
        // Exercise 9
        else if (pressure >= 27 && pressure < 28) {
          makeRain();
        } 
        // Bonus
        else if (pressure < 27) {
          makeRain();
          const audio = document.getElementById("storm");
          audio.play();
        } else {
          alert("not a valid barometric pressure");
        }
      }

      // Exercise 5
      barometerInput.addEventListener("change", changeWeather);
    </script>
  </body>
</html>
